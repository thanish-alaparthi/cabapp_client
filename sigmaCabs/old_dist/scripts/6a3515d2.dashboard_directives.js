angular.module("sigmaCabsApp").directive("googleplace",function(){return{require:"ngModel",link:function(a,b,c,d){var e={types:[],componentRestrictions:{country:"in"}};a.gPlace=new google.maps.places.Autocomplete(b[0],e),google.maps.event.addListener(a.gPlace,"place_changed",function(){a.$apply(function(){d.$setViewValue(b.val())})})}}}),angular.module("sigmaCabsApp").directive("addDynamicField",["PrerequisiteService","$compile",function(a,b){return{require:"ngModel",link:function(c,d,e,f){$(d).on("click",function(){if(a.customerFieldTypes[f.$modelValue]){switch(a.customerFieldTypes[f.$modelValue]){case"text":sInputField='<input type="text" data-ng-model="customerDetails.'+f.$modelValue+'" class="form-control validate[required,maxSize[128]] large" placeholder="'+a.customerFields[f.$modelValue]+'" />';break;case"dropdown":sInputField='<select class="form-control large" data-ng-model="customerDetails.'+f.$modelValue+'" ng-options="value.type as value.title for value in '+c.extraFieldTypes[f.$modelValue]+'"></select>'}var d="";d='<div class="fieldContainer relative left">',d+='<label class="control-label">'+a.customerFields[f.$modelValue]+"</label> ",d+=sInputField,d+=" </div>";var e=b(d)(c);$(e).insertBefore("#insertFieldBeforeMeID"),c.$emit("dynamicFieldAdded",f.$modelValue),$("#insertFieldHackId").val("testtsetetsdfasfs")}})}}}]),angular.module("sigmaCabsApp").directive("addDynamicVehicleType",["PrerequisiteService","$compile",function(a,b){return{require:"ngModel",link:function(a,c,d,e){if(fnAttachVehicleTypesHtml=function(c){var d="";$("#insertVehicleTypeDropDownId").html(" "),a.bookingDetails.vehicleTypes=a.bookingDetails.vehicleTypes||[];for(var e=0;c>e;e++){a.bookingDetails.vehicleTypes[e]=a.bookingDetails.vehicleTypes[e]?a.bookingDetails.vehicleTypes[e].toString():"1",d='<div class="fieldContainer relative left">',d+='<label class="control-label">Vehicle Type'+(e+1)+"</label>",d+='<select class="form-control validate[maxSize[36]] large" data-ng-model="bookingDetails.vehicleTypes['+e+']" data-ng-options="k as v for (k,v) in vehicleTypes"></select>',d+="</div>";var f=b(d)(a);$("#insertVehicleTypeDropDownId").append(f)}for(var e=a.bookingDetails.vehicleTypes.length-1;e>=c;e--)a.bookingDetails.vehicleTypes.splice(e,1);a.fnValidatePassengerCount(),a.safeApply()},fnDrawVehicleTypes=function(){isNaN(e.$modelValue)||e.$modelValue>50||fnAttachVehicleTypesHtml(e.$modelValue)},$(c).bind("change",fnDrawVehicleTypes),a.bookingDetails.vehicleTypes&&a.bookingDetails.vehicleTypes.length){var f=$(c).data("is-first-time-call");if(!f){$(c).data("is-first-time-call","yes");var f=$(c).data("is-first-time-call");fnAttachVehicleTypesHtml(a.bookingDetails.vehicleTypes.length)}}}}}]),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("localytics.directives",[]),angular.module("sigmaCabsApp").directive("chosen",function(){var b,c,d,e,f;return c=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,b=["noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width"],f=function(a){return a.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()})},e=function(a){var b;if(angular.isArray(a))return 0===a.length;if(angular.isObject(a))for(b in a)if(a.hasOwnProperty(b))return!1;return!0},d={restrict:"A",require:"?ngModel",terminal:!0,link:function(d,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u;return g.addClass("localytics-chosen"),o=d.$eval(h.chosen)||{},angular.forEach(h,function(c,e){return a.call(b,e)>=0?o[f(e)]=d.$eval(c):void 0}),r=function(){return g.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},s=function(){return g.removeClass("loading").attr("disabled",!1).trigger("chosen:updated")},m=!1,k=!1,l=function(){return m?g.trigger("chosen:updated"):(g.chosen(o),m=!0)},q=function(){return k=!1,g.find("option.empty").remove()},j=function(a){return k=!0,g.empty().append('<option selected class="empty">'+a+"</option>").attr("disabled",!0).trigger("chosen:updated")},i?(p=i.$render,i.$render=function(){return p(),l()},h.multiple&&(u=function(){return i.$viewValue},d.$watch(u,i.$render,!0))):l(),h.$observe("disabled",function(){return g.trigger("chosen:updated")}),h.ngOptions?(n=h.ngOptions.match(c),t=n[7],angular.isUndefined(d.$eval(t))&&r(),d.$watchCollection(t,function(a,b){return a!==b&&(k&&q(),s(),e(a))?j(o.no_results_text||"No values available"):void 0})):void 0}}})}.call(this),angular.module("sigmaCabsApp").constant("dateTimePickerConfig",{startView:"day",minView:"minute",minuteStep:5,dropdownSelector:null}).constant("dateTimePickerConfigValidation",function(a){"use strict";var b=["startView","minView","minuteStep","dropdownSelector"];for(var c in a)if(a.hasOwnProperty(c)&&b.indexOf(c)<0)throw"invalid option: "+c;var d=["minute","hour","day","month","year"];if(d.indexOf(a.startView)<0)throw"invalid startView value: "+a.startView;if(d.indexOf(a.minView)<0)throw"invalid minView value: "+a.minView;if(d.indexOf(a.minView)>d.indexOf(a.startView))throw"startView must be greater than minView";if(!angular.isNumber(a.minuteStep))throw"minuteStep must be numeric";if(a.minuteStep<=0||a.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==a.dropdownSelector&&!angular.isString(a.dropdownSelector))throw"dropdownSelector must be a string"}).directive("datetimepicker",["dateTimePickerConfig","dateTimePickerConfigValidation",function(a,b){"use strict";return{restrict:"E",require:"ngModel",template:"<div class='datetimepicker'><table class='table-condensed'>   <thead>       <tr>           <th class='left'               data-ng-click=\"changeView(data.currentView, data.leftDate, $event)\"               ><i class='glyphicon glyphicon-arrow-left'/></th>           <th class='switch' colspan='5'               data-ng-click=\"changeView(data.previousView, data.currentDate, $event)\">{{ data.title }}</th>           <th class='right'               data-ng-click=\"changeView(data.currentView, data.rightDate, $event)\"             ><i class='glyphicon glyphicon-arrow-right'/></th>       </tr>       <tr>           <th class='dow' data-ng-repeat='day in data.dayNames' >{{ day }}</th>       </tr>   </thead>   <tbody>       <tr data-ng-class='{ hide: data.currentView == \"day\" }' >           <td colspan='7' >              <span    class='{{ data.currentView }}'                        data-ng-repeat='dateValue in data.dates'                         data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future}'                        data-ng-click=\"changeView(data.nextView, dateValue.date, $event)\">{{ dateValue.display }}</span>            </td>       </tr>       <tr data-ng-show='data.currentView == \"day\"' data-ng-repeat='week in data.weeks'>           <td data-ng-repeat='dateValue in week.dates'                data-ng-click=\"changeView(data.nextView, dateValue.date, $event)\"               class='day'                data-ng-class='{active: dateValue.active, past: dateValue.past, future: dateValue.future}' >{{ dateValue.display }}</td>       </tr>   </tbody></table></div>",scope:{ngModel:"=",onSetTime:"="},replace:!0,link:function(c,d,e){console.log("in directive link");var f={};e.datetimepickerConfig&&(f=c.$eval(e.datetimepickerConfig));var g={};angular.extend(g,a,f),b(g);var h={year:function(a){for(var b=moment.utc(a).startOf("year"),d=10*parseInt(b.year()/10,10),e=moment.utc(b).year(d-1).startOf("year"),f=c.ngModel?moment(c.ngModel).year():0,h={currentView:"year",nextView:"year"===g.minView?"setTime":"month",title:d+"-"+(d+9),leftDate:moment.utc(e).subtract(9,"year").valueOf(),rightDate:moment.utc(e).add(11,"year").valueOf(),dates:[]},i=0;12>i;i++){var j=moment.utc(e).add(i,"years"),k={date:j.valueOf(),display:j.format("YYYY"),past:j.year()<d,future:j.year()>d+9,active:j.year()===f};h.dates.push(k)}return h},month:function(a){for(var b=moment.utc(a).startOf("year"),d=c.ngModel?moment(c.ngModel).format("YYYY-MMM"):0,e={previousView:"year",currentView:"month",nextView:"month"===g.minView?"setTime":"day",currentDate:b.valueOf(),title:b.format("YYYY"),leftDate:moment.utc(b).subtract(1,"year").valueOf(),rightDate:moment.utc(b).add(1,"year").valueOf(),dates:[]},f=0;12>f;f++){var h=moment.utc(b).add(f,"months"),i={date:h.valueOf(),display:h.format("MMM"),active:h.format("YYYY-MMM")===d};e.dates.push(i)}return e},day:function(a){for(var b=moment.utc(a),d=moment.utc(b).startOf("month"),e=moment.utc(b).endOf("month"),f=moment.utc(d).subtract(d.day(),"days"),h=c.ngModel?moment(c.ngModel).format("YYYY-MMM-DD"):"",i={previousView:"month",currentView:"day",nextView:"day"===g.minView?"setTime":"hour",currentDate:b.valueOf(),title:b.format("YYYY-MMM"),leftDate:moment.utc(d).subtract(1,"months").valueOf(),rightDate:moment.utc(d).add(1,"months").valueOf(),dayNames:[],weeks:[]},j=0;7>j;j++)i.dayNames.push(moment.utc().day(j).format("dd"));for(var k=0;6>k;k++){for(var l={dates:[]},m=0;7>m;m++){var n=moment.utc(f).add(7*k+m,"days"),o={date:n.valueOf(),display:n.format("D"),active:n.format("YYYY-MMM-DD")===h,past:n.isBefore(d),future:n.isAfter(e)};l.dates.push(o)}i.weeks.push(l)}return i},hour:function(a){for(var b=moment.utc(a).hour(0).minute(0).second(0),d=c.ngModel?moment(c.ngModel).format("YYYY-MM-DD H"):"",e={previousView:"day",currentView:"hour",nextView:"hour"===g.minView?"setTime":"minute",currentDate:b.valueOf(),title:b.format("YYYY-MMM-DD"),leftDate:moment.utc(b).subtract(1,"days").valueOf(),rightDate:moment.utc(b).add(1,"days").valueOf(),dates:[]},f=0;24>f;f++){var h=moment.utc(b).add(f,"hours"),i={date:h.valueOf(),display:h.format("H:00"),active:h.format("YYYY-MM-DD H")===d};e.dates.push(i)}return e},minute:function(a){for(var b=moment.utc(a).minute(0).second(0),d=c.ngModel?moment(c.ngModel).format("YYYY-MM-DD H:mm"):"",e={previousView:"hour",currentView:"minute",nextView:"setTime",currentDate:b.valueOf(),title:b.format("YYYY-MMM-DD H:mm"),leftDate:moment.utc(b).subtract(1,"hours").valueOf(),rightDate:moment.utc(b).add(1,"hours").valueOf(),dates:[]},f=60/g.minuteStep,h=0;f>h;h++){var i=moment.utc(b).add(h*g.minuteStep,"minute"),j={date:i.valueOf(),display:i.format("H:mm"),active:i.format("YYYY-MM-DD H:mm")===d};e.dates.push(j)}return e},setTime:function(a){var b=new Date(a),d=new Date(b.getTime()+6e4*b.getTimezoneOffset());return g.dropdownSelector&&jQuery(g.dropdownSelector).dropdown("toggle"),angular.isFunction(c.onSetTime)&&c.onSetTime(d,c.ngModel),c.ngModel=d,h[c.data.currentView](a)}},i=function(){var a=c.ngModel?moment(c.ngModel).toDate():new Date;return a.getTime()-6e4*a.getTimezoneOffset()};c.changeView=function(a,b,d){d&&(d.stopPropagation(),d.preventDefault()),a&&b>-1/0&&h[a]&&(c.data=h[a](b))},c.changeView(g.startView,i()),c.$watch("ngModel",function(){c.changeView(c.data.currentView,i())})}}}]);